<<<<<<< HEAD
define("mod_competvet/local/forms/case_form",["exports","./generic_form_helper"],(function(_exports,_generic_form_helper){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;_exports.init=function(modulename){let submitEventHandler=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const onSubmitHandler=event=>{const gradingApp=document.querySelector('[data-region="grading-app"]'),customEvent=new CustomEvent("caseAdded",{});gradingApp.dispatchEvent(customEvent),submitEventHandler&&submitEventHandler(event)},button=document.querySelector('[data-action="case-add"]');button&&button.addEventListener("click",(event=>{event.preventDefault();const data=document.querySelector('[data-region="grading-app"]').dataset,modalForm=(0,_generic_form_helper.genericFormCreate)(data,"case:add",modulename,"case_form_add");modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,onSubmitHandler),modalForm.show()}))}}));
=======
define("mod_competvet/local/forms/case_form",["exports","core_form/modalform","core/str","../new-repository"],(function(_exports,_modalform,_str,_newRepository){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Create a Modal Form to add a case
   *
   * @module     mod_competvet/local/forms/case_form
   * @copyright  2024 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_newRepository=_interopRequireDefault(_newRepository);_exports.init=()=>{const submitEventHandler=()=>{window.location.reload()},button=document.querySelector('[data-action="case-add"]');button&&(button.addEventListener("click",(event=>{event.preventDefault();const data=document.querySelector('[data-region="grading-app"]').dataset,datasetLowercase=Object.entries(data).reduce(((acc,_ref)=>{let[key,value]=_ref;return acc[key.toLowerCase()]=value,acc}),{}),modalForm=new _modalform.default({modalConfig:{title:(0,_str.get_string)("case:".concat("add"),"mod_competvet")},formClass:"".concat("mod_competvet","\\form\\case_form_").concat("add"),args:{...datasetLowercase,currenturl:window.location.href},saveButtonText:(0,_str.get_string)("case:".concat("add",":save"),"mod_competvet")});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,submitEventHandler),modalForm.show()})),document.addEventListener("click",(async event=>{if(event.target.closest('[data-action="delete-case"]')){const button=event.target.closest('[data-action="delete-case"]');await _newRepository.default.deleteEntry({entryid:button.dataset.id}),window.location.reload()}})))}}));
>>>>>>> 64ec799 (Multiple improvements)

//# sourceMappingURL=case_form.min.js.map