define("mod_competvet/local/forms/eval_observation_delete",["exports","core/str","core/notification","core/modal_factory","core/modal_events","core/ajax","./generic_form_helper"],(function(_exports,_str,_notification,_modal_factory,_modal_events,_ajax,_generic_form_helper){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Javascript adding a new observation.
   *
   * @module     mod_competvet/local/forms/observation_add_form
   * @copyright  2023 Laurent David <laurent@call-learning.fr>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=_interopRequireDefault(_notification),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_ajax=_interopRequireDefault(_ajax);_exports.init=async modulename=>{const selectedElements=(0,_generic_form_helper.getSelectedElement)("observation:delete");if(!selectedElements)return;const[deleteTitle,deleteConfirm]=await(0,_str.get_strings)([{key:"observation:delete",component:modulename},{key:"observation:delete:confirm",component:modulename}]);selectedElements.forEach((element=>{element.addEventListener("click",(async event=>{event.preventDefault();const modal=await _modal_factory.default.create({title:deleteTitle,body:deleteConfirm,type:_modal_factory.default.types.SAVE_CANCEL,large:!0}).catch(_notification.default.exception);modal.getRoot().on(_modal_events.default.save,(()=>{_ajax.default.call([{methodname:"mod_competvet_eval_delete_observation",args:{observationid:event.target.dataset.id},done:data=>{data.success?(modal.hide(),window.location.assign(event.target.dataset.returnurl),window.location.reload()):_notification.default.exception({message:data.error})},fail:_notification.default.exception}])})),modal.show()}))}))}}));

//# sourceMappingURL=eval_observation_delete.min.js.map