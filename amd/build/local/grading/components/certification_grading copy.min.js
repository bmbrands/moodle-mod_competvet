define("mod_competvet/local/grading/components/certification_grading copy",["../../competstate","core/notification","core/templates","../../new-repository"],(function(_competstate,_notification,_templates,_newRepository){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * The grading component of the Evaluations tab.
   *
   * @module     mod_competvet/local/grading/components/evaluations_grading
   * @copyright  2024 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */_competstate=_interopRequireDefault(_competstate),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates),_newRepository=_interopRequireDefault(_newRepository);const gradingApp=document.querySelector('[data-region="grading-app"]');(()=>{const templateName="certification-grading",region=gradingApp.querySelector('[data-region="'.concat(templateName,'"]')),template="mod_competvet/grading/components/".concat(templateName);_competstate.default.subscribe(templateName,(context=>{void 0!==context[templateName]&&_templates.default.render(template,context).then((html=>{region.innerHTML=html})).catch(_notification.default.exception)}))})();const formCalculation=()=>{const{"certification-grading":grade,user:user}=_competstate.default.getData(),grading=grade.grading;grading.userid=user.id;const form=document.querySelector('[data-region="certification-grading"]'),formData=new FormData(form),formObject=Object.fromEntries(formData);grading.comment=formObject.comment,grading.evaloptions.forEach((option=>{option.key==Number(formObject.evaluatordecision)?option.selected=!0:option.selected=!1}));return{grading:grading}};(()=>{const form=document.querySelector('[data-region="certification-grading"]');form.addEventListener("change",(async e=>{e.preventDefault();const context=formCalculation();_competstate.default.setValue("certification-grading",context)})),form.addEventListener("submit",(async e=>{e.preventDefault();const context=formCalculation();await _newRepository.default.saveCertificationGrading(context.grading),_competstate.default.setValue("certification-grading",context)}))})()}));

//# sourceMappingURL=certification_grading copy.min.js.map