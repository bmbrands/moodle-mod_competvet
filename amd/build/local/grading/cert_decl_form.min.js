define("mod_competvet/local/grading/cert_decl_form",["exports","core_form/modalform","core/str"],(function(_exports,_modalform,_str){var obj;
/**
   * Create a Modal Form to add a Certificate Declaration
   *
   * @module     mod_competvet/local/grading/cert_decl_form
   * @copyright  2024 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};_exports.init=()=>{const submitEventHandler=()=>{const gradingApp=document.querySelector('[data-region="grading-app"]'),customEvent=new CustomEvent("certAdded",{});gradingApp.dispatchEvent(customEvent)};document.addEventListener("click",(function(event){if(event.target.closest('[data-action="cert-decl"]')){const button=event.target.closest('[data-action="cert-decl"]');event.preventDefault();const data=document.querySelector('[data-region="grading-app"]').dataset,datasetLowercase=Object.entries(data).reduce(((acc,_ref)=>{let[key,value]=_ref;return acc[key.toLowerCase()]=value,acc}),{});datasetLowercase.criterionid=button.dataset.id,button.dataset.declId&&(datasetLowercase.declid=button.dataset.declId);const modalForm=new _modalform.default({modalConfig:{title:(0,_str.get_string)("certdecl","mod_competvet")},formClass:"mod_competvet\\form\\cert_decl",args:{...datasetLowercase,currenturl:window.location.href},saveButtonText:(0,_str.get_string)("save")});modalForm.addEventListener(modalForm.events.LOADED,(()=>{modalForm.modal.getRoot().on("modal:bodyRendered",(()=>{const rangeInput=modalForm.modal.getRoot().find('input[type="range"]'),levelInput=modalForm.modal.getRoot().find('input[name="level"]'),currentLevel=modalForm.modal.getRoot().find('[data-region="current-level"]');rangeInput.val(levelInput.val()),currentLevel.text(levelInput.val()),rangeInput.on("input",(()=>{levelInput.val(rangeInput.val()),currentLevel.text(rangeInput.val())}))}))})),modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,submitEventHandler),modalForm.show()}}))}}));

//# sourceMappingURL=cert_decl_form.min.js.map