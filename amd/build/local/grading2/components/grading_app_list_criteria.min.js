define("mod_competvet/local/grading2/components/grading_app_list_criteria",["exports","../competstate","core/notification","core/templates","../repository"],(function(_exports,_competstate,_notification,_templates,_repository){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module grading_app_usernavigation
   *
   * @module     mod_competvet/local/grading2/grading_app_list
   * @copyright  2024 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_competstate=_interopRequireDefault(_competstate),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates),_repository=_interopRequireDefault(_repository);const gradingApp=document.querySelector('[data-region="grading-app"]');(()=>{const listCriteria=gradingApp.querySelector('[data-region="'.concat("list-criteria",'"]')),template="mod_competvet/grading2/list/".concat("list-criteria");_competstate.default.subscribe("list-criteria",(context=>{void 0!==context["list-criteria"]&&_templates.default.render(template,context).then((html=>{listCriteria.innerHTML=html})).catch(_notification.default.exception)}))})(),(()=>{const form=document.querySelector('[data-region="list-criteria"]');form.addEventListener("submit",(async e=>{e.preventDefault();const state=_competstate.default.getData(),ListCriteria=await _repository.default.getListCriteria({cmid:1,userid:state.user.id}),formData=new FormData(form),formObject={};for(const[name,value]of formData.entries())formObject[name]=value;ListCriteria.criteria.forEach((criterium=>{const criteriumId=criterium.criteriumid;criterium.grade=formObject["criterium-".concat(criteriumId)],criterium.comment=formObject["criterium-".concat(criteriumId,"-comment")]})),ListCriteria.userid=state.user.id,_repository.default.saveListGrades(ListCriteria)}))})();var _default=["list-criteria"];return _exports.default=_default,_exports.default}));

//# sourceMappingURL=grading_app_list_criteria.min.js.map