define("mod_competvet/local/grading2/components/globalgrade",["../../competstate","core/notification","core/templates","../../new-repository"],(function(_competstate,_notification,_templates,_newRepository){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module globalgrade
   *
   * @module     mod_competvet/local/grading2/components/globalgrade
   * @copyright  2024 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */_competstate=_interopRequireDefault(_competstate),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates),_newRepository=_interopRequireDefault(_newRepository);const gradingApp=document.querySelector('[data-region="grading-app"]');(()=>{const region=gradingApp.querySelector('[data-region="'.concat("globalgrade",'"]')),template="mod_competvet/grading2/components/".concat("globalgrade");_competstate.default.subscribe("globalgrade",(context=>{void 0!==context.globalgrade&&_templates.default.render(template,context).then((html=>{region.innerHTML=html})).catch(_notification.default.exception)}))})(),(()=>{const form=document.querySelector('[data-region="globalgrade"]');form.addEventListener("submit",(async e=>{e.preventDefault();const state=_competstate.default.getData(),formData=new FormData(form),formObject={};for(const[name,value]of formData.entries())formObject[name]=value;const globalGrade=state.globalgrade;globalGrade.userid=state.user.id,globalGrade.finalgrade=formObject.finalgrade,globalGrade.finalgradeoptions.forEach((element=>{element.selected=element.value===formObject.finalgrade})),globalGrade.comment=formObject.comment,_competstate.default.setData({globalgrade:globalGrade}),_newRepository.default.saveGlobalGrade(globalGrade)}))})()}));

//# sourceMappingURL=globalgrade.min.js.map