define("mod_competvet/local/manager/sortable",["exports","jquery","jqueryui","mod_competvet/local/grading2/competstate"],(function(_exports,_jquery,_jqueryui,_competstate){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Create a jquery sortable list.
   *
   * @module     mod_competvet/local/manager/sortable
   * @copyright  2024 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_jquery=_interopRequireDefault(_jquery),_competstate=_interopRequireDefault(_competstate);var _default={sortable:selector=>{(0,_jquery.default)(selector).sortable({handle:".drag-handle",update:event=>{((type,gridId,gradeId,order)=>{let state=_competstate.default.getData();"grade"===type&&state.grids.forEach((grid=>{grid.gridid==gridId&&order.forEach(((gradeId,index)=>{grid.grades.forEach((grade=>{grade.gradeid==gradeId&&(grade.sortorder=index)})),grid.grades.sort(((a,b)=>a.sortorder-b.sortorder))}))})),"option"===type&&state.grids.forEach((grid=>{grid.grades.forEach((grade=>{grade.gradeid==gradeId&&(order.forEach(((optionId,index)=>{grade.options.forEach((option=>{option.optionid==optionId&&(option.sortorder=index)}))})),grade.options.sort(((a,b)=>a.sortorder-b.sortorder)))}))})),_competstate.default.setData(state)})((0,_jquery.default)(event.target).data("type"),(0,_jquery.default)(event.target).data("gridId"),(0,_jquery.default)(event.target).data("gradeId"),(0,_jquery.default)(event.target).sortable("toArray",{attribute:"data-id"}))}})}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=sortable.min.js.map