{"version":3,"file":"repository.min.js","sources":["../../../src/local/manager/repository.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * TODO describe module repository\n *\n * @module     mod_competvet/local/manager/repository\n * @copyright  2024 Bas Brands <bas@sonsbeekmedia.nl>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {call as fetchMany} from 'core/ajax';\n\n/**\n * Get the data for this manager.\n *\n * @param {Number} cmid The cmid.\n * @returns {Promise}\n */\nexport const getData = (cmid) => {\n    const args = {\n        cmid,\n    };\n\n    return fetchMany([{methodname: 'mod_competvet_get_plannings', args}])[0];\n};\n\n/**\n * Get the grading data.\n *\n * @param {Number} cmid The cmid.\n * @returns {Promise}\n */\nexport const getGradingData = (cmid) => {\n    const defaultdata = {\n        \"grids\": [\n            {\n                \"gridname\": \"YEAR2024\",\n                \"gridid\": 1,\n                \"cmid\": cmid,\n                \"grades\": [\n                    {\n                        \"gradeid\": 1,\n                        \"title\": \"Nombre et diversité des cas\",\n                        \"sortorder\": 1,\n                        \"edit\": false,\n                        \"haschanged\": false,\n                        \"options\": [\n                            {\n                                \"optionid\": 1,\n                                \"title\": \"Le nombre de saisis par l'étudiant est insuffisant\",\n                                \"sortorder\": 1,\n                                \"grade\": 0,\n                            },\n                            {\n                                \"optionid\": 2,\n                                \"title\": \"Le nombre de cas saisis par l'étudiant est suffisant\",\n                                \"sortorder\": 2,\n                                \"grade\": 12.5,\n                            },\n                            {\n                                \"optionid\": 3,\n                                \"title\": \"Le nombre de cas saisis par l'étudiant est très satisfaisant\",\n                                \"sortorder\": 3,\n                                \"grade\": 25,\n                            }\n                        ]\n                    },\n                    {\n                        \"gradeid\": 2,\n                        \"title\": \"Qualité des cas\",\n                        \"sortorder\": 2,\n                        \"options\": [\n                            {\n                                \"optionid\": 4,\n                                \"title\": \"La qualité des cas saisis par l'étudiant est insuffisante\",\n                                \"sortorder\": 1,\n                                \"grade\": 0,\n                            },\n                            {\n                                \"optionid\": 5,\n                                \"title\": \"La qualité des cas saisis par l'étudiant est suffisante\",\n                                \"sortorder\": 2,\n                                \"grade\": 12.5,\n                            },\n                            {\n                                \"optionid\": 6,\n                                \"title\": \"La qualité des cas saisis par l'étudiant est très satisfaisante\",\n                                \"sortorder\": 3,\n                                \"grade\": 25,\n                            }\n                        ]\n                    }\n                ]\n            },\n        ]\n    };\n    // Get the data from the browser local storage.\n    const data = JSON.parse(localStorage.getItem('grading')) || defaultdata;\n    return data;\n};\n\n/**\n * Save the grading date.\n *\n * @param {Object} data The data to save.\n * @returns {Promise}\n */\nexport const saveGradingData = (data) => {\n    // const context = [\n    //     data.grids,\n    // ];\n    // return fetchMany([{methodname: 'mod_competvet_save_grading', context}])[0];\n    // Temporarily store the data in the browser local storage.\n    localStorage.setItem('grading', JSON.stringify(data));\n};\n\n/**\n * Save the data for this manager.\n *\n * @param {Object} data The data to save.\n * @returns {Promise}\n */\nexport const saveData = (data) => {\n    const context = [\n        data.situations.categories,\n    ];\n    return fetchMany([{methodname: 'mod_competvet_save_plannings', context}])[0];\n};\n\nexport default {\n    getData: getData,\n    saveData: saveData,\n    getGradingData: getGradingData,\n    saveGradingData: saveGradingData,\n};"],"names":["getData","cmid","args","methodname","getGradingData","defaultdata","JSON","parse","localStorage","getItem","saveGradingData","data","setItem","stringify","saveData","context","situations","categories"],"mappings":";;;;;;;;MA8BaA,QAAWC,aACdC,KAAO,CACTD,KAAAA,aAGG,cAAU,CAAC,CAACE,WAAY,8BAA+BD,KAAAA,QAAQ,mCAS7DE,eAAkBH,aACrBI,YAAc,OACP,CACL,UACgB,kBACF,OACFJ,YACE,CACN,SACe,QACF,wCACI,QACL,cACM,UACH,CACP,UACgB,QACH,+DACI,QACJ,GAEb,UACgB,QACH,iEACI,QACJ,MAEb,UACgB,QACH,yEACI,QACJ,MAIrB,SACe,QACF,4BACI,UACF,CACP,UACgB,QACH,sEACI,QACJ,GAEb,UACgB,QACH,oEACI,QACJ,MAEb,UACgB,QACH,4EACI,QACJ,iBASxBK,KAAKC,MAAMC,aAAaC,QAAQ,aAAeJ,0DAUnDK,gBAAmBC,OAM5BH,aAAaI,QAAQ,UAAWN,KAAKO,UAAUF,uDAStCG,SAAYH,aACfI,QAAU,CACZJ,KAAKK,WAAWC,mBAEb,cAAU,CAAC,CAACd,WAAY,+BAAgCY,QAAAA,WAAW,4CAG/D,CACXf,QAASA,QACTc,SAAUA,SACVV,eAAgBA,eAChBM,gBAAiBA"}